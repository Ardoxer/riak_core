<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Module riak_core_node_watcher</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module riak_core_node_watcher</h1>
<ul class="index"><li><a href="#types">Data Types</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>

<p><b>Behaviours:</b> <a href="gen_server.html"><tt>gen_server</tt></a>.</p>

<h2><a name="types">Data Types</a></h2>

<h3 class="typedecl"><a name="type-hc_check_interval_opt">hc_check_interval_opt()</a></h3>
<p><tt>hc_check_interval_opt() = {check_interval, timeout()}</tt></p>


<h3 class="typedecl"><a name="type-hc_max_callback_fails_opt">hc_max_callback_fails_opt()</a></h3>
<p><tt>hc_max_callback_fails_opt() = {max_callback_failures, non_neg_integer()}</tt></p>


<h3 class="typedecl"><a name="type-hc_max_health_fails_opt">hc_max_health_fails_opt()</a></h3>
<p><tt>hc_max_health_fails_opt() = {max_health_failures, non_neg_integer()}</tt></p>


<h3 class="typedecl"><a name="type-health_opt">health_opt()</a></h3>
<p><tt>health_opt() = <a href="#type-hc_check_interval_opt">hc_check_interval_opt()</a> | <a href="#type-hc_max_callback_fails_opt">hc_max_callback_fails_opt()</a> | <a href="#type-hc_max_health_fails_opt">hc_max_health_fails_opt()</a></tt></p>


<h3 class="typedecl"><a name="type-health_opts">health_opts()</a></h3>
<p><tt>health_opts() = [<a href="#type-health_opt">health_opt()</a>]</tt></p>


<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#avsn-0">avsn/0</a></td><td></td></tr>
<tr><td valign="top"><a href="#check_health-1">check_health/1</a></td><td>Force a health check for the given service.</td></tr>
<tr><td valign="top"><a href="#code_change-3">code_change/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#handle_call-3">handle_call/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#handle_cast-2">handle_cast/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#handle_info-2">handle_info/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#init-1">init/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#node_down-0">node_down/0</a></td><td></td></tr>
<tr><td valign="top"><a href="#node_up-0">node_up/0</a></td><td></td></tr>
<tr><td valign="top"><a href="#nodes-1">nodes/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#resume_health_checks-0">resume_health_checks/0</a></td><td></td></tr>
<tr><td valign="top"><a href="#service_down-1">service_down/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#service_down-2">service_down/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#service_up-2">service_up/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#service_up-3">service_up/3</a></td><td><a href="#service_up-4"><code>service_up/4</code></a> with default options.</td></tr>
<tr><td valign="top"><a href="#service_up-4">service_up/4</a></td><td>Create a service that can be declared up or down based on the
  result of a function in addition to usual monitoring.</td></tr>
<tr><td valign="top"><a href="#services-0">services/0</a></td><td></td></tr>
<tr><td valign="top"><a href="#services-1">services/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#start_link-0">start_link/0</a></td><td></td></tr>
<tr><td valign="top"><a href="#suspend_health_checks-0">suspend_health_checks/0</a></td><td></td></tr>
<tr><td valign="top"><a href="#terminate-2">terminate/2</a></td><td></td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="avsn-0">avsn/0</a></h3>
<div class="spec">
<p><tt>avsn() -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="check_health-1">check_health/1</a></h3>
<div class="spec">
<p><tt>check_health(Service::atom()) -&gt; ok</tt><br></p>
</div><p>Force a health check for the given service.  If the service does
  not have a health check associated with it, this is ignored.  Resets the
  automatic health check timer if there is one.</p>
<p><b>See also:</b> <a href="#service_up-4">service_up/4</a>.</p>

<h3 class="function"><a name="code_change-3">code_change/3</a></h3>
<div class="spec">
<p><tt>code_change(OldVsn, State, Extra) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="handle_call-3">handle_call/3</a></h3>
<div class="spec">
<p><tt>handle_call(X1, From, State) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="handle_cast-2">handle_cast/2</a></h3>
<div class="spec">
<p><tt>handle_cast(X1, State) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="handle_info-2">handle_info/2</a></h3>
<div class="spec">
<p><tt>handle_info(Msg, State) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="init-1">init/1</a></h3>
<div class="spec">
<p><tt>init(X1) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="node_down-0">node_down/0</a></h3>
<div class="spec">
<p><tt>node_down() -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="node_up-0">node_up/0</a></h3>
<div class="spec">
<p><tt>node_up() -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="nodes-1">nodes/1</a></h3>
<div class="spec">
<p><tt>nodes(Service) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="resume_health_checks-0">resume_health_checks/0</a></h3>
<div class="spec">
<p><tt>resume_health_checks() -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="service_down-1">service_down/1</a></h3>
<div class="spec">
<p><tt>service_down(Id) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="service_down-2">service_down/2</a></h3>
<div class="spec">
<p><tt>service_down(Id, X2) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="service_up-2">service_up/2</a></h3>
<div class="spec">
<p><tt>service_up(Id, Pid) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="service_up-3">service_up/3</a></h3>
<div class="spec">
<p><tt>service_up(Id::atom(), Pid::pid(), MFA::mfa()) -&gt; ok</tt><br></p>
</div><p><a href="#service_up-4"><code>service_up/4</code></a> with default options.</p>
<p><b>See also:</b> <a href="#service_up-4">service_up/4</a>.</p>

<h3 class="function"><a name="service_up-4">service_up/4</a></h3>
<div class="spec">
<p><tt>service_up(Id::atom(), Pid::pid(), Callback::mfa(), Options::<a href="#type-health_opts">health_opts()</a>) -&gt; ok</tt><br></p>
</div><p>Create a service that can be declared up or down based on the
  result of a function in addition to usual monitoring. The function can
  be set to be called automatically every interval, or only explicitly.
  An explicit health check can be done using <a href="#check_health-1"><code>check_health/1</code></a>. The
  check interval is expressed in milliseconds. If <code>infinity</code> is passed
  in, a check is never done automatically. The function used to check for
  health must return a boolean; if it does not, it is considered an error.
  A check has a default maximum health failures as 1, and maximum number
  of other callback errors as 3. Either of those being reached will cause
  the service to be marked as down. In the case of a health failure, the
  health function will continue to be called at increasing intervals.  In
  the case of a callback error, the automatic health check is disabled.
  The callback function will have the pid of the service prepended to its
  list of args, so the actual arity of the function must be 1 + the length
  of the argument list provided. A service added this way is removed like
  any other, using <a href="#service_down-1"><code>service_down/1</code></a>.</p>
<p><b>See also:</b> <a href="#service_up-2">service_up/2</a>.</p>

<h3 class="function"><a name="services-0">services/0</a></h3>
<div class="spec">
<p><tt>services() -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="services-1">services/1</a></h3>
<div class="spec">
<p><tt>services(Node) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="start_link-0">start_link/0</a></h3>
<div class="spec">
<p><tt>start_link() -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="suspend_health_checks-0">suspend_health_checks/0</a></h3>
<div class="spec">
<p><tt>suspend_health_checks() -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="terminate-2">terminate/2</a></h3>
<div class="spec">
<p><tt>terminate(Reason, State) -&gt; any()</tt></p>
</div>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Feb 14 2013, 15:00:14.</i></p>
</body>
</html>
